{
  "article": {
    "id": 360041382852,
    "url": "https://hatenablogmedia.zendesk.com/api/v2/help_center/ja/articles/360041382852.json",
    "html_url": "https://hatenablogmedia.zendesk.com/hc/ja/articles/360041382852",
    "author_id": 378867417791,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 360006001571,
    "created_at": "2020-04-02T08:17:46Z",
    "updated_at": "2020-04-09T05:36:37Z",
    "name": "【リリース完了】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行います",
    "title": "【リリース完了】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行います",
    "source_locale": "ja",
    "locale": "ja",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2020-04-09T05:36:37Z",
    "user_segment_id": null,
    "permission_group_id": 972311,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<p><span style=\"font-weight: 400;\">平素は、はてなブログMediaをご利用いただきありがとうございます。</span></p>\n<p><span style=\"font-weight: 400;\">はてなブログMediaでは、デザインテンプレート（hbm-visual, hbm-text）の目次機能に関し、目次リンクが正しい位置にリンクされない不具合を確認したため、アップデートを行います。</span></p>\n<p><span style=\"font-weight: 400;\">このアップデートに対し、お客様側で追加で行っていただく作業はございません。</span></p>\n<p> </p>\n<h3><strong>対象となるブログ・変更箇所</strong></h3>\n<ul>\n<li style=\"font-weight: 400;\">\n<span style=\"font-weight: 400;\">デザインテンプレート（</span><a href=\"https://hbm-visual.hatenablog.com/\" target=\"_blank\" rel=\"noopener\">hbm-visual</a><span style=\"font-weight: 400;\">, </span><a href=\"https://hbm-text.hatenablog.com/\" target=\"_blank\" rel=\"noopener\">hbm-text</a><span style=\"font-weight: 400;\">）をご利用いただいているブログ</span>\n</li>\n<ul>\n<li style=\"font-weight: 400;\"><span style=\"font-weight: 400;\">しかし、以下に該当するブログは弊社側よりアップデートを行うことができないため、必要であればご自身でご対応お願いいたします。</span></li>\n<ul>\n<li style=\"font-weight: 400;\">\n<a href=\"https://docs.google.com/document/d/1coT2Ek3MwipV1qLgHSaNKLkHB8XoKNh-pkU9mWtncBQ/\" target=\"_blank\" rel=\"noopener\">hbm-visual, hbm-text カスタマイズドキュメント</a><span style=\"font-weight: 400;\">に記載されていない独自のカスタマイズを行っている</span>\n</li>\n<li style=\"font-weight: 400;\"><span style=\"font-weight: 400;\">デフォルトで設定されているjQuery 2.0.3のバージョン変更を行っている</span></li>\n</ul>\n</ul>\n<li style=\"font-weight: 400;\"><span style=\"font-weight: 400;\">設定画面 ⇒デザイン ⇒ ヘッダ⇒ タイトル下に記載されいてるJavaScriptを変更いたします。</span></li>\n<li style=\"font-weight: 400;\"><span style=\"font-weight: 400;\">記事ページで目次機能を利用した際、目次リングが正しい位置にリンクされるよう変更いたします。</span></li>\n</ul>\n<h3><strong>仕様変更の実施日</strong></h3>\n<ul>\n<li><span style=\"font-weight: 400;\">2020年4月9日（木）を予定しております。</span></li>\n<li><span style=\"font-weight: 400;\">以降は記事ページで目次機能を利用した際、目次リングが正しい位置にリンクされるようになります。</span></li>\n</ul>\n<p> </p>\n<h3><strong>【4月9日追記】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行いました</strong></h3>\n<p><span style=\"font-weight: 400;\">本機能は予定通り、2020年4月9日（木）にアップデートいたしました。</span></p>\n<p><span style=\"font-weight: 400;\">引き続き、はてなブログMediaをどうぞ宜しくお願い致します。</span></p>\n<p> </p>\n<h3><strong>アップデート内容</strong></h3>\n<ul>\n<li style=\"font-weight: 400;\"><span style=\"font-weight: 400;\">設定画面 ⇒デザイン ⇒ ヘッダ⇒ タイトル下の記述を以下のように変更いたしまします。</span></li>\n</ul>\n<p><strong>変更前</strong></p>\n<pre><span class=\"wysiwyg-font-size-medium\">&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js\"&gt;&lt;/script&gt;</span><br><span class=\"wysiwyg-font-size-medium\">&lt;script&gt;</span><br><span class=\"wysiwyg-font-size-medium\">(function($){</span><br><br><span class=\"wysiwyg-font-size-medium\">var headerH = $('.blog-header').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> var blogDescriptionHeight = $('.blog-description').offset().top;</span><br><span class=\"wysiwyg-font-size-medium\"> $('body').css('padding-top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar').css('top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');</span><br><br><span class=\"wysiwyg-font-size-medium\">$('.navbar-toggle-btn').click(function() {</span><br><span class=\"wysiwyg-font-size-medium\"> resizeHeader();</span><br><span class=\"wysiwyg-font-size-medium\"> $(this).toggleClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar').toggleClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> if($(this).hasClass('is-open')) {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-inner').slideDown(500, 'swing');</span><br><span class=\"wysiwyg-font-size-medium\"> } else {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-inner').slideUp(500,'swing');</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><span class=\"wysiwyg-font-size-medium\">})(jQuery);</span><br><span class=\"wysiwyg-font-size-medium\">&lt;/script&gt;</span></pre>\n<p> <strong>変更後</strong></p>\n<pre><span class=\"wysiwyg-font-size-medium\">&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js\"&gt;&lt;/script&gt;</span><br><span class=\"wysiwyg-font-size-medium\">&lt;script&gt;</span><br><span class=\"wysiwyg-font-size-medium\">(function($){</span><br><br><span class=\"wysiwyg-font-size-medium\">var headerH = $('.blog-header').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> var blogDescriptionHeight = $('.blog-description').offset().top;</span><br><span class=\"wysiwyg-font-size-medium\"> $('body').css('padding-top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar').css('top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');</span><br><br><span class=\"wysiwyg-font-size-medium\">$('.navbar-toggle-btn').click(function() {</span><br><span class=\"wysiwyg-font-size-medium\"> resizeHeader();</span><br><span class=\"wysiwyg-font-size-medium\"> $(this).toggleClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar').toggleClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> if($(this).hasClass('is-open')) {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-inner').slideDown(500, 'swing');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.blog-header').addClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> } else {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-inner').slideUp(500,'swing');</span><br><span class=\"wysiwyg-font-size-medium\"> setTimeout(function() {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.blog-header').removeClass('is-open');</span><br><span class=\"wysiwyg-font-size-medium\"> }, 500);</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><br><br><span class=\"wysiwyg-font-size-medium\"> $(function() {</span><br><span class=\"wysiwyg-font-size-medium\"> $('a[href^=#]').click(function(){</span><br><span class=\"wysiwyg-font-size-medium\"> var href= decodeURI($(this).attr(\"href\"));</span><br><span class=\"wysiwyg-font-size-medium\"> console.log(href);</span><br><span class=\"wysiwyg-font-size-medium\"> var target = $(href == \"#\" || href == \"\" ? 'html' : href);</span><br> <br><span class=\"wysiwyg-font-size-medium\"> var headerH = ($('.blog-header').hasClass('not-fixed')) ? 0 : $('.blog-header').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> var position = target.offset().top - headerH;</span><br> <br> <br><span class=\"wysiwyg-font-size-medium\"> $(\"html, body\").animate({scrollTop:position}, 0, \"swing\");</span><br><span class=\"wysiwyg-font-size-medium\"> return false;</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><span class=\"wysiwyg-font-size-medium\"> $(window).resize(function(){</span><br><span class=\"wysiwyg-font-size-medium\"> resizeHeader();</span><br><span class=\"wysiwyg-font-size-medium\"> headerH = $('.blog-header').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> blogDescriptionHeight = $('.blog-description').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><span class=\"wysiwyg-font-size-medium\"> $(window).scroll(function(){</span><br><span class=\"wysiwyg-font-size-medium\"> if ($(window).scrollTop() &gt; blogDescriptionHeight) {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.blog-description').hide();</span><br><span class=\"wysiwyg-font-size-medium\"> if(!$('body').hasClass('scrolled')) {</span><br><span class=\"wysiwyg-font-size-medium\"> $('body').addClass('scrolled');</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\"> else {</span><br><span class=\"wysiwyg-font-size-medium\"> $('.blog-description').show();</span><br><span class=\"wysiwyg-font-size-medium\"> $('body').removeClass('scrolled');</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\"> resizeHeader();</span><br><span class=\"wysiwyg-font-size-medium\"> });</span><br><br><span class=\"wysiwyg-font-size-medium\">function resizeHeader() {</span><br><span class=\"wysiwyg-font-size-medium\"> var headerH = $('.blog-header').outerHeight(false);</span><br><span class=\"wysiwyg-font-size-medium\"> $('body').css('padding-top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar').css('top', headerH+'px');</span><br><span class=\"wysiwyg-font-size-medium\"> $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');</span><br><span class=\"wysiwyg-font-size-medium\"> }</span><br><span class=\"wysiwyg-font-size-medium\">})(jQuery);</span><br><span class=\"wysiwyg-font-size-medium\">&lt;/script&gt;</span></pre>"
  }
}
