{"article":{"id":360041382852,"url":"https://hatenablogmedia.zendesk.com/api/v2/help_center/ja/articles/360041382852.json","html_url":"https://hatenablogmedia.zendesk.com/hc/ja/articles/360041382852","author_id":378867417791,"comments_disabled":false,"draft":false,"promoted":false,"position":0,"vote_sum":0,"vote_count":0,"section_id":360006001571,"created_at":"2020-04-02T08:17:46Z","updated_at":"2020-04-09T05:36:37Z","name":"【リリース完了】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行います","title":"【リリース完了】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行います","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2020-04-09T05:36:37Z","user_segment_id":null,"permission_group_id":972311,"content_tag_ids":[],"label_names":[],"body":"\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e平素は、はてなブログMediaをご利用いただきありがとうございます。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003eはてなブログMediaでは、デザインテンプレート（hbm-visual, hbm-text）の目次機能に関し、目次リンクが正しい位置にリンクされない不具合を確認したため、アップデートを行います。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003eこのアップデートに対し、お客様側で追加で行っていただく作業はございません。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e \u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003e対象となるブログ・変更箇所\u003c/strong\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\n\u003cspan style=\"font-weight: 400;\"\u003eデザインテンプレート（\u003c/span\u003e\u003ca href=\"https://hbm-visual.hatenablog.com/\" target=\"_blank\" rel=\"noopener\"\u003ehbm-visual\u003c/a\u003e\u003cspan style=\"font-weight: 400;\"\u003e, \u003c/span\u003e\u003ca href=\"https://hbm-text.hatenablog.com/\" target=\"_blank\" rel=\"noopener\"\u003ehbm-text\u003c/a\u003e\u003cspan style=\"font-weight: 400;\"\u003e）をご利用いただいているブログ\u003c/span\u003e\n\u003c/li\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eしかし、以下に該当するブログは弊社側よりアップデートを行うことができないため、必要であればご自身でご対応お願いいたします。\u003c/span\u003e\u003c/li\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\n\u003ca href=\"https://docs.google.com/document/d/1coT2Ek3MwipV1qLgHSaNKLkHB8XoKNh-pkU9mWtncBQ/\" target=\"_blank\" rel=\"noopener\"\u003ehbm-visual, hbm-text カスタマイズドキュメント\u003c/a\u003e\u003cspan style=\"font-weight: 400;\"\u003eに記載されていない独自のカスタマイズを行っている\u003c/span\u003e\n\u003c/li\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eデフォルトで設定されているjQuery 2.0.3のバージョン変更を行っている\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\u003cspan style=\"font-weight: 400;\"\u003e設定画面 ⇒デザイン ⇒ ヘッダ⇒ タイトル下に記載されいてるJavaScriptを変更いたします。\u003c/span\u003e\u003c/li\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\u003cspan style=\"font-weight: 400;\"\u003e記事ページで目次機能を利用した際、目次リングが正しい位置にリンクされるよう変更いたします。\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\u003cstrong\u003e仕様変更の実施日\u003c/strong\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cspan style=\"font-weight: 400;\"\u003e2020年4月9日（木）を予定しております。\u003c/span\u003e\u003c/li\u003e\n\u003cli\u003e\u003cspan style=\"font-weight: 400;\"\u003e以降は記事ページで目次機能を利用した際、目次リングが正しい位置にリンクされるようになります。\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e \u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003e【4月9日追記】デザインテンプレート（hbm-visual, hbm-text）の目次機能のアップデートを行いました\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e本機能は予定通り、2020年4月9日（木）にアップデートいたしました。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e引き続き、はてなブログMediaをどうぞ宜しくお願い致します。\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e \u003c/p\u003e\n\u003ch3\u003e\u003cstrong\u003eアップデート内容\u003c/strong\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\"\u003e\u003cspan style=\"font-weight: 400;\"\u003e設定画面 ⇒デザイン ⇒ ヘッダ⇒ タイトル下の記述を以下のように変更いたしまします。\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e変更前\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js\"\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;script\u0026gt;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e(function($){\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003evar headerH = $('.blog-header').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var blogDescriptionHeight = $('.blog-description').offset().top;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('body').css('padding-top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar').css('top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e$('.navbar-toggle-btn').click(function() {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e resizeHeader();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(this).toggleClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar').toggleClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e if($(this).hasClass('is-open')) {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-inner').slideDown(500, 'swing');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e } else {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-inner').slideUp(500,'swing');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e})(jQuery);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;/script\u0026gt;\u003c/span\u003e\u003c/pre\u003e\n\u003cp\u003e \u003cstrong\u003e変更後\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js\"\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;script\u0026gt;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e(function($){\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003evar headerH = $('.blog-header').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var blogDescriptionHeight = $('.blog-description').offset().top;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('body').css('padding-top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar').css('top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e$('.navbar-toggle-btn').click(function() {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e resizeHeader();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(this).toggleClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar').toggleClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e if($(this).hasClass('is-open')) {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-inner').slideDown(500, 'swing');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.blog-header').addClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e } else {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-inner').slideUp(500,'swing');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e setTimeout(function() {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.blog-header').removeClass('is-open');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }, 500);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(function() {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('a[href^=#]').click(function(){\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var href= decodeURI($(this).attr(\"href\"));\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e console.log(href);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var target = $(href == \"#\" || href == \"\" ? 'html' : href);\u003c/span\u003e\u003cbr\u003e \u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var headerH = ($('.blog-header').hasClass('not-fixed')) ? 0 : $('.blog-header').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var position = target.offset().top - headerH;\u003c/span\u003e\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(\"html, body\").animate({scrollTop:position}, 0, \"swing\");\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e return false;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(window).resize(function(){\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e resizeHeader();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e headerH = $('.blog-header').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e blogDescriptionHeight = $('.blog-description').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $(window).scroll(function(){\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e if ($(window).scrollTop() \u0026gt; blogDescriptionHeight) {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.blog-description').hide();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e if(!$('body').hasClass('scrolled')) {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('body').addClass('scrolled');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e else {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.blog-description').show();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('body').removeClass('scrolled');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e resizeHeader();\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e });\u003c/span\u003e\u003cbr\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003efunction resizeHeader() {\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e var headerH = $('.blog-header').outerHeight(false);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('body').css('padding-top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar').css('top', headerH+'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e $('.navbar-toggle-btn').css('top', (headerH / 2) +'px');\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e }\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e})(jQuery);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e\u0026lt;/script\u0026gt;\u003c/span\u003e\u003c/pre\u003e"}}