{"article":{"id":900007211663,"url":"https://hatenablogmedia.zendesk.com/api/v2/help_center/ja/articles/900007211663.json","html_url":"https://hatenablogmedia.zendesk.com/hc/ja/articles/900007211663","author_id":378867417791,"comments_disabled":false,"draft":false,"promoted":false,"position":0,"vote_sum":0,"vote_count":0,"section_id":360006001571,"created_at":"2021-05-19T05:57:22Z","updated_at":"2021-06-09T08:00:00Z","name":"はてなフォトライフの画像を表示する際に、画面にズレが生じないよう変更しました","title":"はてなフォトライフの画像を表示する際に、画面にズレが生じないよう変更しました","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2021-06-09T08:00:00Z","user_segment_id":null,"permission_group_id":972311,"content_tag_ids":[],"label_names":[],"body":"\u003cp\u003e平素よりはてなブログMediaをご利用いただきまして、誠にありがとうございます。\u003cbr\u003e本日、はてなフォトライフの画像をはてなブログに貼り付けた場合に、画像表示時に画面にズレ(レイアウトシフト)が生じないよう変更しました。\u003cbr\u003eこの変更により、画面をスクロールした際に、後から画像の読み込みが行われ、閲覧中の領域が下にずれてしまう、という問題を回避することができます。\u003cbr\u003e\u003cimg src=\"https://hatenablogmedia.zendesk.com/hc/article_attachments/900008573186/20210513145512.png\" alt=\"20210513145512.png\"\u003e\u003c/p\u003e\n\u003cp\u003eまた、この変更に合わせて画像の遅延読み込み(lazy load)にも対応し、画像をたくさん掲載したブログでも快適に閲覧できるようになりました。\u003cbr\u003e※Safariなどloading属性による遅延読み込みに対応していないブラウザではご利用いただけません。\u003c/p\u003e\n\u003cp\u003eこのリリースはGoogleのランキング要因に組みこまれるCore Web Vitals（ウェブに関する主な指標）の、CLS（Cumulative Layout Shift）に対応するるための開発となります。\u003cbr\u003eなお、本機能リリース後に投稿されたエントリは自動で本変更が適用されます。 なお、過去に投稿されたエントリへの適用方法については、下記をご参照ください。\u003c/p\u003e\n\u003ch3\u003e過去に貼り付けたフォトライフの画像について\u003c/h3\u003e\n\u003cp\u003e編集モード「はてな記法」「Markdown」をご利用の記事については、記事を更新していただくと、自動的に本変更が適用されます。\u003cbr\u003eなお、必要に応じて、はてなにて表示用のHTMLの再生成を行う場合があり、その際には本変更が自動で適用されます。\u003cbr\u003e編集モード「見たまま」で投稿された記事については、仕様上記事の再投稿を行っても本変更は適用されません。同じ画像を編集サイドバーから貼り付け直していただくか、「HTML編集」タブを開き、以下のようにimgタグのwidth,height属性に画像のサイズ情報を入力いただく必要がございます。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e変更前のimgタグ\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003e\u0026lt;img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/s/sample/20210101/20210101000000.jpg\" alt=\"f:id:sample:20210101000000:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\" /\u0026gt;\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e変更後のimgタグ(赤字が変更点)\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003e\u0026lt;img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/s/sample/20210101/20210101000000.jpg\" alt=\"f:id:sample:20210101000000:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\" \u003cspan class=\"wysiwyg-color-red\"\u003ewidth=”画像の幅(数字が入ります)\" height=”画像の高さ(数字が入ります)”\u003cspan style=\"font-weight: 400;\"\u003e loading=\"lazy\"\u003c/span\u003e\u003c/span\u003e /\u0026gt;\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e※:h オプションで高さのみを指定していた場合には \u003c/span\u003e\u003cspan style=\"font-weight: 400;\"\u003eclass=\"hatena-fotolife  hatena-fotolife-height-only\" classが設定されます。\u003c/span\u003e\u003c/p\u003e\n\u003ch2\u003e\u003cspan style=\"font-weight: 400;\"\u003e画像が誤った縦横比で表示されてしまう場合\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e今回のアップデートに際し、以下の通りはてなブログMediaが自動で読み込んでいるCSSを修正いたしました。画像が誤った縦横比で表示されてしまう場合は、お客様側で作成されたスタイルをご確認いただけますでしょうか？\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e変更前のCSS\u003c/span\u003e\u003cspan style=\"font-weight: 400;\"\u003e\u003cbr\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cpre class=\"c-mrkdwn__pre\" data-stringify-type=\"pre\"\u003eimg.hatena-fotolife {\u003cbr\u003e    cursor: zoom-in;\u003cbr\u003e}\u003c/pre\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003e変更後のCSS\u003c/span\u003e\u003c/p\u003e\n\u003cdiv class=\"c-message_kit__blocks c-message_kit__blocks--rich_text\"\u003e\n\u003cdiv class=\"c-message__message_blocks c-message__message_blocks--rich_text\"\u003e\n\u003cdiv class=\"p-block_kit_renderer\" data-qa=\"block-kit-renderer\"\u003e\n\u003cdiv class=\"p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first\"\u003e\n\u003cdiv class=\"p-rich_text_block\" dir=\"auto\"\u003e\n\u003cpre class=\"c-mrkdwn__pre\" data-stringify-type=\"pre\"\u003eimg.hatena-fotolife {\u003cbr\u003e    cursor: zoom-in;\u003cbr\u003e    height: auto;\u003cbr\u003e}\u003cbr\u003eimg.hatena-fotolife-height-only {\u003cbr\u003e    width: auto;\u003cbr\u003e}\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"c-message_kit__reaction_bar c-reaction_bar c-reaction_bar--dark c-reaction_bar--collapsed\" role=\"group\" data-qa=\"reaction_bar\" aria-label=\"絵文字リアクション\" data-stringify-ignore=\"true\"\u003e \u003c/div\u003e\n\u003cp\u003eお手数をおかけいたしますが、ご理解いただけますと幸いです。\u003c/p\u003e"}}