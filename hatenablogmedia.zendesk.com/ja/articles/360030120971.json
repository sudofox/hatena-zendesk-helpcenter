{"article":{"id":360030120971,"url":"https://hatenablogmedia.zendesk.com/api/v2/help_center/ja/articles/360030120971.json","html_url":"https://hatenablogmedia.zendesk.com/hc/ja/articles/360030120971","author_id":378867417791,"comments_disabled":false,"draft":false,"promoted":false,"position":1,"vote_sum":0,"vote_count":0,"section_id":360004955952,"created_at":"2019-07-02T03:24:15Z","updated_at":"2021-12-07T06:29:15Z","name":"リバースプロキシの設定をしましたが、運用するURLでブログを閲覧できません。どうすればよいですか？","title":"リバースプロキシの設定をしましたが、運用するURLでブログを閲覧できません。どうすればよいですか？","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2021-12-07T06:29:15Z","user_segment_id":null,"permission_group_id":972311,"content_tag_ids":[],"label_names":[],"body":"\u003cp\u003e以下の順にご確認ください。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cspan style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\"\u003e該当のブログが閲覧できる はてなid でログインしていますか？\u003cbr\u003e\u003cbr\u003e\u003c/span\u003e\u003c/li\u003e\n\u003cli\u003e\u003cspan style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\"\u003e以下の表示の場合は、設定自体は成功しています。そのブログを閲覧できる はてなid でログインした状態であれば、ブログが閲覧できます。\u003cimg style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\" src=\"https://hatenablogmedia.zendesk.com/hc/article_attachments/360032448971/20180123121516.png\" alt=\"20180123121516.png\"\u003e上記以外の表示でブログが閲覧できない場合、以下の3〜4をご確認ください。\u003cbr\u003e\u003cbr\u003e\u003c/span\u003e\u003c/li\u003e\n\u003cli\u003eサブディレクトリ運用の場合、はてなブログMediaにリバースプロキシする際のURLにサブディレクトリ部分のパスを含めていますか？\u003cbr\u003e\u003cbr\u003eはてなブログMediaへのプロキシには、リクエストされたパスをすべて送ってください。\u003cbr\u003eよくあるミスは以下のような設定を行っている場合です。\u003cbr\u003e\n\u003cpre\u003e# パスの中の/yourblogが削られてはてなブログに送信されている\n\u0026lt;LocationMatch ^/yourblog/(.*)\u0026gt;\n  ProxyPassMatch http://yourblog.hatenablog-oem.com/$1\n\u0026lt;/LocationMatch\u0026gt;\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003eはてなブログMediaへのリクエストのX-Forwarded-Hostヘッダにブログとして運用したいURLのホスト名が含まれていますか？\u003cbr\u003e\u003cbr\u003e\n\u003cp\u003eリバースプロキシ運用のためには、はてなブログMediaへのリクエストのX-Forwarded-Hostに運用したいURLのホスト名が含まれている必要があります。例えば、\u003ca class=\"external-link\" href=\"https://yourblog.exmaple.com/\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ehttps://yourblog.exmaple.com\u003c/a\u003e でブログを配信する場合 X-Forwarded-Hostに\u003ccode\u003eyourblog.example.com\u003c/code\u003eを設定する必要があります。ApacheではProxyPassMatchを使うことで自動的にX-Forwarded-Hostが設定されます。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e"}}