{"article":{"id":360039702532,"url":"https://mackerelio.zendesk.com/api/v2/help_center/en-us/articles/360039702532.json","html_url":"https://support.mackerel.io/hc/en-us/articles/360039702532-Mackerel-doesn-t-recognize-duplicate-servers-from-agent-installed-templates-machine-images-etc-","author_id":390085917472,"comments_disabled":true,"draft":false,"promoted":false,"position":2,"vote_sum":0,"vote_count":0,"section_id":360008120511,"created_at":"2020-02-24T09:04:50Z","updated_at":"2022-06-24T01:15:35Z","name":"Mackerel doesn't recognize duplicate servers from agent installed templates ／ machine images etc.","title":"Mackerel doesn't recognize duplicate servers from agent installed templates ／ machine images etc.","source_locale":"ja","locale":"en-us","outdated":false,"outdated_locales":[],"edited_at":"2020-03-09T09:07:39Z","user_segment_id":null,"permission_group_id":1305651,"content_tag_ids":[],"label_names":["\"Host Already Retired\"","\"Auto Scaling\"","AutoScaling","オートスケール"],"body":"\u003cp\u003eIn Mackerel, each host is identified by a unique host ID, and that host ID is saved in the host file on which mackerel-agent is running (\u003ccode\u003e/Var/lib / mackerel-agent / id\u003c/code\u003e for Linux OS hosts, the installation folder \u003ccode\u003eid\u003c/code\u003e file for Windows Servers. Refer to the host section of the glossary for more details).\u003c/p\u003e\n\u003cp\u003eWhen mackerel-agent launches on another host containing a file with the same host ID recorded, it is recognized as the same host by Mackerel even if multiple hosts exist. If this is the case, monitoring and metric posting will not function properly. Also, refer here. \u003ca href=\"https://mackerel.io/docs/entry/faq/spec/host-inheriting\"\u003eFAQ・How do I have a re-created instance be recognized as the same host as before?\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eTherefore, when creating a template / machine image installed with the agent, make sure that the host ID file has been deleted before doing so.\u003c/p\u003e\n\u003cp\u003eFor a host that has already been launched containing an ID file that overlaps with another host, it is possible to append it as a separate host by following the procedure below.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eDelete the host ID file in the target host\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eReboot the agent of target host\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e"}}