{"article":{"id":900005602386,"url":"https://mackerelio.zendesk.com/api/v2/help_center/en-us/articles/900005602386.json","html_url":"https://support.mackerel.io/hc/en-us/articles/900005602386-Why-can-t-I-get-metrics-with-the-mackerel-plugin-apache2-plugin-","author_id":390085917472,"comments_disabled":true,"draft":false,"promoted":false,"position":0,"vote_sum":0,"vote_count":0,"section_id":360007912312,"created_at":"2021-04-12T03:05:28Z","updated_at":"2021-05-11T09:13:17Z","name":"Why can’t I get metrics with the mackerel-plugin-apache2 plugin?","title":"Why can’t I get metrics with the mackerel-plugin-apache2 plugin?","source_locale":"ja","locale":"en-us","outdated":false,"outdated_locales":[],"edited_at":"2021-05-11T09:13:17Z","user_segment_id":null,"permission_group_id":1305651,"content_tag_ids":[],"label_names":[],"body":"\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003eIf you’re having trouble monitoring with the \u003c/span\u003e\u003ca href=\"https://github.com/mackerelio/mackerel-agent-plugins/tree/master/mackerel-plugin-apache2\" target=\"_blank\" rel=\"noopener\"\u003emackerel-plugin-apache2\u003c/a\u003e\u003cspan style=\"font-weight: 400;\"\u003e plugin, the problem may correspond to one or more of the following issues.\u003c/span\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"1\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eThe mod_status is not set correctly.\u003c/span\u003e\u003c/li\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"1\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eThe URL that the plugin references and the URL assigned by the mod_status server-status handler are different.\u003c/span\u003e\u003c/li\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"1\"\u003e\u003cspan style=\"font-weight: 400;\"\u003emod_rewrite is redirecting to an HTTPS URL etc.\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003eCheck and see whether or not any of these cases apply to you and if the server-status response is correct on the host.\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cspan style=\"font-weight: 400;\"\u003eYou can use the following curl command to check.\u003c/span\u003e\u003c/p\u003e\n\u003cpre\u003e\u003cspan style=\"font-weight: 400;\"\u003ecurl -v http://127.0.0.1:1080/server-status\u003c/span\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"1\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eThis method can be used if Apache is configured based on the plugin’s README.\u003c/span\u003e\u003c/li\u003e\n\u003cul\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"2\"\u003e\u003ca href=\"https://github.com/mackerelio/mackerel-agent-plugins/tree/master/mackerel-plugin-apache2#set-up-your-apache-server\" target=\"_blank\" rel=\"noopener\"\u003eSet up your apache server - mackerel-plugin-apache2\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cli style=\"font-weight: 400;\" aria-level=\"1\"\u003e\u003cspan style=\"font-weight: 400;\"\u003eIf the port number etc. has been changed, please check according to your environment.\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e \u003c/p\u003e"}}