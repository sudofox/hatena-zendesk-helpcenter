{"article":{"id":360040108631,"url":"https://mackerelio.zendesk.com/api/v2/help_center/ja/articles/360040108631.json","html_url":"https://support.mackerel.io/hc/ja/articles/360040108631","author_id":390085917472,"comments_disabled":true,"draft":false,"promoted":false,"position":0,"vote_sum":1,"vote_count":1,"section_id":360008120511,"created_at":"2020-02-24T08:39:32Z","updated_at":"2021-12-21T05:10:49Z","name":"エージェントが起動しない","title":"エージェントが起動しない","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2020-07-16T05:05:51Z","user_segment_id":null,"permission_group_id":1305651,"content_tag_ids":[],"label_names":["mackerel-agent","インストール","起動","エラー","できない"],"body":"\u003cp\u003eインストールしたエージェントが起動に失敗する / インストール時にエラーが発生する / インストールがおこなえない、などの際には、以下の点について、改めて確認してください。\u003c/p\u003e\n\u003ch2\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003eインストール対象の環境について\u003c/span\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eインストール対象のOSが公式サポートされているものかどうかを確認してください。\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://mackerel.io/ja/docs/entry/overview#support-environments\"\u003e対象環境 - Mackerel ヘルプ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003e通信状況について\u003c/span\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eインストール対象のサーバーから、\u003ca href=\"https://support.mackerel.io/hc/ja/articles/360039633271-Mackerel%E3%81%8C%E3%83%9B%E3%82%B9%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8BIP%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%81%A8%E3%83%9D%E3%83%BC%E3%83%88%E7%95%AA%E5%8F%B7%E3%82%92%E6%95%99%E3%81%88%E3%81%A6%E4%B8%8B%E3%81%95%E3%81%84\" target=\"_blank\" rel=\"noopener\"\u003eMackerelがホストされているIPアドレスとポート番号を教えて下さい\u003c/a\u003e に列挙されている宛先への通信がおこなえることを確認してください。\n\u003cul\u003e\n\u003cli\u003eプロキシサーバー経由での通信が必要な場合には、\u003ca href=\"https://support.mackerel.io/hc/ja/articles/360039701312-mackerel-agent%E3%81%8C%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E7%B5%8C%E8%B7%AF%E3%81%AF%E5%88%B6%E5%BE%A1%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99%E3%81%8B-\" target=\"_blank\" rel=\"noopener\"\u003emackerel-agentが使用する経路は制御できますか？\u003c/a\u003e を参考にプロキシサーバーの設定を実施してください。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eエージェントをインストールしているサーバーにウイルス対策ソフトウェアがインストールされている場合、mackerel-agentの通信が阻害されていないことを確認してください。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eapi.mackerelio.com\u003c/code\u003eが名前解決できているかどうかを確認してください。 \u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003eその他全般\u003c/span\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eパッケージ（yum / apt）が正しくインストールされているかを確認してください。\u003c/li\u003e\n\u003cli\u003emackerel-agent に指定しているAPIキーが ReadOnly なものでないことを確認してください。\u003c/li\u003e\n\u003cli\u003emackerel-agent が出力しているログの内容を確認し、エラーが出力されていないかどうかを確認してください。\u003c/li\u003e\n\u003cli\u003e設定ファイル \u003ccode\u003emackerel-agent.conf\u003c/code\u003e が正しく記述できているかどうか、コマンド \u003ccode\u003emackerel-agent configtest\u003c/code\u003e によりチェックしてください。\u003c/li\u003e\n\u003cli\u003eDocker ImageやAMIなどによりOSイメージ化した際に\u003ccode\u003e/var/lib/mackerel-agent/id\u003c/code\u003eもコピーしている場合、このファイルを削除する必要があります。\n\u003cul\u003e\n\u003cli\u003emackerel-agentは初回起動時にサーバーが発行したIDを\u003ccode\u003e/var/lib/mackerel-agent/id\u003c/code\u003eに保存します。以後はこのファイルに記載されたIDによりホストの識別を行います。\u003c/li\u003e\n\u003cli\u003eそのため、\u003ccode\u003e/var/lib/mackerel-agent/id\u003c/code\u003eがコピーされると実際は複数のホストがMackerel上では同一のホストと認識され、メトリックの投稿や監視が正しく動作しなくなります。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e \u003c/p\u003e\n\u003cp\u003e全てを確認した上で問題が解消されない場合は、「サポートチームへ連絡」からお問い合わせください（エラーログなどがある場合には添付をお願いいたします）。「サポートチームへ連絡」は、当ページヘッダ部分、もしくはMackerel Webコンソールのヘッダ部分に表示されています。\u003c/p\u003e"}}