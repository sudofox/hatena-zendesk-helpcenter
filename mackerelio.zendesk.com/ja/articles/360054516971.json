{"article":{"id":360054516971,"url":"https://mackerelio.zendesk.com/api/v2/help_center/ja/articles/360054516971.json","html_url":"https://support.mackerel.io/hc/ja/articles/360054516971","author_id":390436787231,"comments_disabled":true,"draft":false,"promoted":false,"position":4,"vote_sum":0,"vote_count":0,"section_id":360008120511,"created_at":"2020-12-18T02:22:48Z","updated_at":"2021-12-21T05:10:49Z","name":"Kubernetes環境にmackerel-container-agentを設定したが、Mackerelにホストが連携されない","title":"Kubernetes環境にmackerel-container-agentを設定したが、Mackerelにホストが連携されない","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2020-12-18T07:55:02Z","user_segment_id":null,"permission_group_id":1305651,"content_tag_ids":[],"label_names":[],"body":"\u003cp\u003e以下の点について改めてご確認ください。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReadiness Probeを設定している場合、そのProbeに対するチェックが正常におこなえる状態になっているかどうかを確認してください。\u003c/li\u003e\n\u003cli\u003eread-only-port が無効な環境の場合、環境変数やRoleの設定が必要となります。詳しくは\u003ca href=\"https://mackerel.io/ja/docs/entry/howto/install-agent/container/kubernetes\" target=\"_blank\" rel=\"noopener\"\u003eヘルプページ\u003c/a\u003eをご確認ください。\u003c/li\u003e\n\u003cli\u003ekubeletで認証が有効な場合には、\u003ca href=\"https://mackerel.io/ja/docs/entry/howto/install-agent/container/kubernetes\" target=\"_blank\" rel=\"noopener\"\u003eヘルプページ\u003c/a\u003eに記載のリソースを参照できるように、ServiceAccountに対してRoleを設定する必要があります。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eエラーログの出力がされるなど、mackerel-container-agent の挙動がおかしい場合は以下の点を確認してください。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e最新バージョンの mackerel-container-agent を利用しているかどうかを確認してください。\u003c/li\u003e\n\u003cli\u003eそれでも解消されない場合、監視対象の Kubernetes のバージョンと合わせてサポート窓口までお問い合わせください。\u003c/li\u003e\n\u003c/ul\u003e"}}