{"article":{"id":900005307206,"url":"https://mackerelio.zendesk.com/api/v2/help_center/ja/articles/900005307206.json","html_url":"https://support.mackerel.io/hc/ja/articles/900005307206","author_id":390085917472,"comments_disabled":true,"draft":false,"promoted":false,"position":0,"vote_sum":0,"vote_count":0,"section_id":360007912312,"created_at":"2021-03-23T01:56:10Z","updated_at":"2021-03-25T06:16:57Z","name":"mackerel-plugin-snmp プラグインでメトリックが取得できない","title":"mackerel-plugin-snmp プラグインでメトリックが取得できない","source_locale":"ja","locale":"ja","outdated":false,"outdated_locales":[],"edited_at":"2021-03-24T05:29:26Z","user_segment_id":null,"permission_group_id":1305651,"content_tag_ids":[],"label_names":["SNMP","ネットワーク機器"],"body":"\u003cp\u003e\u003ca href=\"https://github.com/mackerelio/mackerel-agent-plugins/tree/master/mackerel-plugin-snmp\" target=\"_blank\" rel=\"noopener\"\u003emackerel-plugin-snmp\u003c/a\u003e プラグインによる監視が正常に行えない場合の多くが以下のような原因に因るものとなります。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eプラグインのオプションに正しいOIDが指定されていない。\u003cbr\u003e\n\u003cul\u003e\n\u003cli\u003eプラグインは SNMP の Get Request により指定したOIDのオブジェクトの値を取得します。配下にツリーが含まれるOIDは指定できません。\u003c/li\u003e\n\u003cli\u003eプラグインのOIDの確認には、snmpgetコマンドをご利用ください。対象のOIDを指定し、オブジェクトの値が返ることを確認してください。\u003c/li\u003e\n\u003cli\u003e\u003cspan style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\"\u003esnmpwalkコマンドは、配下にツリーが含まれれるOIDを指定しても値が返ります。プラグインに指定するOIDの確認には必ずsnmpgetコマンドをご利用ください。\u003c/span\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003eメトリックに関するオプションの指定が不足している\n\u003cul\u003e\n\u003cli\u003eメトリックとするOIDなどの指定は\u003ccode class=\"c-mrkdwn__code\" data-stringify-type=\"code\"\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003eOID:NAME[:DIFF?][:STACK?]\u003c/span\u003e\u003c/code\u003eのように半角コロン区切りの形式で指定する必要があり、それぞれの意味合いは以下のようになります。 \u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable style=\"border-collapse: collapse; width: 100%;\" border=\"1\"\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003e\u003cstrong\u003e項目\u003c/strong\u003e\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003e\u003cstrong\u003e設定値\u003c/strong\u003e\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003e\u003cstrong\u003e必須\u003c/strong\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eOID\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eOID（参照する値が数値となるMIBのみ対応）\u003c/td\u003e\n\u003ctd class=\"wysiwyg-text-align-center\" style=\"width: 33.3333%;\"\u003e○\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eNAME\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eグラフに表示するメトリックのラベル\u003c/td\u003e\n\u003ctd class=\"wysiwyg-text-align-center\" style=\"width: 33.3333%;\"\u003e○\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eDIFF\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eカウンター値で計算するかどうか（0 or 1）\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003e \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eSTACK\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003eメトリックを積み上げ表示するかどうか（0 or 1）\u003c/td\u003e\n\u003ctd style=\"width: 33.3333%;\"\u003e \u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cul\u003e\n\u003cli style=\"list-style-type: none;\"\u003e\n\u003cul\u003e\n\u003cli\u003e上記の \u003ccode class=\"c-mrkdwn__code\" data-stringify-type=\"code\"\u003e\u003cspan class=\"wysiwyg-font-size-medium\"\u003eNAME\u003c/span\u003e\u003c/code\u003eが未指定となっているケースが多くございますので、指定されているかご確認ください。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"}}